import{j as e}from"./index-tByUo5J9.js";import{b as p,c as y,d as w,e as k,f as C,X as g,g as z,a as u,U as V,T as I,F as M}from"./lucide-react-Cx0r66_4.js";import{u as P,a as $}from"./useContestants-DUYxl1eB.js";import"./firebase-JdEOCa9W.js";const E=({contestant:t,upvotes:d,downvotes:i,userVote:c,onVote:o,onOpenModal:x})=>{const r=d-i;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 cursor-pointer",onClick:()=>x(t),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${t.category==="miss"?"bg-pink-100 text-pink-800":"bg-blue-100 text-blue-800"}`,children:t.category==="miss"?"Miss":"Mister"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.age," ans"]})]})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),o(t.id,"up")},className:`flex items-center space-x-1 px-3 py-2 rounded-lg transition-all ${c==="up"?"bg-green-100 text-green-700 ring-2 ring-green-200":"bg-gray-100 text-gray-600 hover:bg-green-50 hover:text-green-600"}`,children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:d})]}),e.jsxs("button",{onClick:l=>{l.stopPropagation(),o(t.id,"down")},className:`flex items-center space-x-1 px-3 py-2 rounded-lg transition-all ${c==="down"?"bg-red-100 text-red-700 ring-2 ring-red-200":"bg-gray-100 text-gray-600 hover:bg-red-50 hover:text-red-600"}`,children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:i})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:`text-sm font-medium ${r>=0?"text-green-600":"text-red-600"}`,children:[r>=0?"+":"",r]})]})]})]})]})},F=({contestant:t,onClose:d,onNext:i,onPrevious:c,hasNext:o,hasPrevious:x})=>t?e.jsxs("div",{className:"fixed inset-0 bg-black/60 flex justify-center items-center z-50 backdrop-blur-sm p-4",onClick:d,children:[x&&e.jsx("button",{onClick:r=>{r.stopPropagation(),c()},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/50 hover:bg-white/80 rounded-full p-2 text-gray-800 transition-all z-50",children:e.jsx(C,{size:32})}),e.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden border border-white/20 backdrop-blur-xl grid md:grid-cols-2",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"relative bg-black/10",children:[e.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full max-h-[80vh] object-contain"}),e.jsx("button",{onClick:d,className:"absolute top-3 right-3 bg-black/50 rounded-full p-1.5 text-white hover:bg-black/70 transition-all md:hidden",children:e.jsx(g,{size:20})})]}),e.jsxs("div",{className:"relative flex flex-col p-8",children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white hidden md:block",children:e.jsx(g,{size:24})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-lg text-purple-600 dark:text-purple-400 capitalize font-semibold mb-2",children:t.category}),e.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:t.name}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300 mb-6",children:[e.jsx(p,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{children:[t.age," ans"]})]}),e.jsx("div",{className:"border-t border-gray-300/50 dark:border-gray-600/50 my-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"À propos"}),e.jsx("p",{className:"text-md text-gray-800 dark:text-gray-200 leading-relaxed",children:t.description})]})]})]}),o&&e.jsx("button",{onClick:r=>{r.stopPropagation(),i()},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/50 hover:bg-white/80 rounded-full p-2 text-gray-800 transition-all z-50",children:e.jsx(z,{size:32})})]}):null,D=()=>{const{voteData:t,vote:d}=P(),{contestants:i,loading:c,error:o}=$(),[x,r]=u.useState("all"),[l,m]=u.useState(null),b=s=>{m(s)},j=()=>{m(null)},a=i.filter(s=>x==="all"||s.category===x),v=()=>{if(!l)return;const n=(a.findIndex(h=>h.id===l.id)+1)%a.length;m(a[n])},f=()=>{if(!l)return;const n=(a.findIndex(h=>h.id===l.id)-1+a.length)%a.length;m(a[n])};l&&a.findIndex(s=>s.id===l.id);const N=i.map(s=>({...s,totalVotes:t[s.id]?t[s.id].upvotes-t[s.id].downvotes:0})).sort((s,n)=>n.totalVotes-s.totalVotes).slice(0,3);return c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:e.jsx("p",{className:"text-lg text-gray-600",children:"Chargement des candidats..."})}):o?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:e.jsxs("p",{className:"text-lg text-red-600",children:["Erreur: ",o]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(V,{className:"h-12 w-12 text-purple-600"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4",children:"Votez pour vos favoris"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Exprimez vos votes pour les candidats que vous pensez mériter de gagner. Votre voix compte !"})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx(I,{className:"h-6 w-6 text-yellow-500 mr-2"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Classement actuel"})]}),i.length===0?e.jsx("p",{className:"text-center text-lg text-gray-600",children:"Aucun candidat pour le classement."}):e.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl border border-white/20 p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:N.map((s,n)=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:s.photo,alt:s.name,className:"w-16 h-16 rounded-full object-cover mx-auto mb-2"}),e.jsx("div",{className:`absolute -top-2 -right-2 w-6 h-6 rounded-full text-xs font-bold flex items-center justify-center text-white ${n===0?"bg-yellow-500":n===1?"bg-gray-400":"bg-amber-600"}`,children:n+1})]}),e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:s.category}),e.jsxs("p",{className:"text-sm font-medium text-purple-600",children:[s.totalVotes>=0?"+":"",s.totalVotes," votes"]})]},s.id))})})]}),e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-white/50 backdrop-blur-sm rounded-xl border border-white/20 p-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtrer:"}),e.jsx("div",{className:"flex space-x-1",children:[{value:"all",label:"Tous"},{value:"miss",label:"Miss"},{value:"mister",label:"Mister"}].map(s=>e.jsx("button",{onClick:()=>r(s.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${x===s.value?"bg-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.label},s.value))})]})}),i.length===0?e.jsx("p",{className:"text-center text-lg text-gray-600",children:"Aucun candidat trouvé."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map(s=>e.jsx(E,{contestant:s,upvotes:t[s.id]?.upvotes||0,downvotes:t[s.id]?.downvotes||0,userVote:t[s.id]?.userVote||null,onVote:d,onOpenModal:b},s.id))})]}),e.jsx(F,{contestant:l,onClose:j,onNext:v,onPrevious:f,hasNext:a.length>1,hasPrevious:a.length>1})]})};export{D as default};
